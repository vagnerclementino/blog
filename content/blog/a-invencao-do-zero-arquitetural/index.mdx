---
title: "A invenção do zero (arquitetural)"
date: "2024-01-30"
description: "'Big Ball of mud' e os problemas da ausência de um estilo arquitetural"
featuredImage: feature.jpg
---

## Os homens que calculavam

A contribuição dos árabes para a Matemática foi de grande importância e
influência ao longo da história. Durante a Idade Média, enquanto a Europa
estava em um período de estagnação em relação ao desenvolvimento matemático, os
árabes tiveram um papel fundamental na preservação, tradução e expansão do
conhecimento matemático greco-romano, bem como na introdução de novos conceitos
e técnicas matemáticas.

Para entendermos a abrangência dessa contribuição basta entendermos a
etimologia de algumas palavras. A palavra "_al_" no idioma árabe é conhecida
como o artigo definido, equivalente ao "o" ou "a" em português. Quando os
árabes dominaram partes da Península Ibérica, eles trouxeram consigo sua língua
e cultura. Muitas palavras árabes foram gradualmente incorporadas ao português,
especialmente no vocabulário relacionado ao campo da agricultura, comércio,
ciência e tecnologia. Um livro muito interessante que conta a relação da
cultura árabe com a Matemática é _O Homem que Calculava_[^1] de Malba Tahan,
pseudônimo do escritor brasileiro _Júlio César de Melo e Sousa_.

![Capa do Livro O Homem que Calculava de Malba
Tahan](./capa-o-homem-que-calculava.webp)

Dessa forma, palavras como "algoritmo", "álgebra" e "algarismo" mantiveram o
prefixo "_al_" para preservar a sua identidade. E justamente uma das maiores
contribuições árabes foi a introdução dos algarismos no sistema decimal. Esses
algarismos hoje são amplamente usados em todo o mundo e formam a base de nosso
atual sistema numérico. Dentre os algarismos propostos pelo árabes, teve um em
especial que teve um papel especial, aquele ao qual damos o nome de _zero_.

## A invenção do zero

#### Na Matemática

A invenção do número zero representa um marco fundamental na história da
matemática e um dos avanços mais significativos da humanidade. Embora seja
difícil identificar o exato momento em que o zero foi inventado, sabemos que
essa ideia revolucionária começou a ser desenvolvida por civilizações antigas,
como os maias, babilônios e hindus.

Apesar de não existir um consenso sobre a origem do conceito de zero, alguns
historiados definem que foi na Índia, por volta do século V d.C., que o conceito
de zero começou a ser formalizado e utilizado com mais frequência. Os
matemáticos indianos perceberam que ao adicionar um símbolo para representar uma
quantidade vazia ou a ausência de algo, era possível transformar completamente a
forma como os números eram manipulados. 

A importância do zero na matemática foi notada pelos árabes, que depois de sua
expansão pelo Oriente, trouxeram esse conceito para o Ocidente. Foi na cultura
árabe que o termo _al-zéro_ surgiu, que posteriormente se transformou na
palavra “zero” que usamos hoje.

A incorporação do número zero na matemática permitiu um grande avanço nas
operações numéricas. Antes da sua invenção, lidar com quantidades nulas ou a
realização de cálculos complexos era extremamente difícil. Com a introdução do
zero, os matemáticos puderam desenvolver sistemas de numeração mais eficientes
e precisos, como o sistema de numeração posicional usado atualmente.


#### Nas Linguagens de Programação

A invenção do número zero, como conceito matemático, e o conceito de `null` ou
nulo em linguagens de programação têm uma relação interessante. Assim como o
número zero foi introduzido na matemática para representar uma quantidade vazia
ou a ausência de algo, o conceito de `null`, em linguagens de programação,
serve para representar uma referência vazia ou a ausência de um valor válido.
Tanto o zero quanto o `null` desempenham a função de indicar a ausência de
algo, mas em contextos diferentes.

Diferentemente do zero, a possibilidade de referenciar um endereço inválido,
custou muito caro. O cientista da computação Tony Hoare, em sua palestra _"Null
References: The Billion Dollar Mistake"_[^2], ressalta que as referências nulas
em linguagens de programação podem levar a erros e comportamentos indesejados,
que custou bilhões de dólares em depuração de código e manutenção de sistemas.

O ponto principal da palestra é que o uso de referências nulas torna o código
mais propenso a erros, pois muitas vezes os desenvolvedores esquecem de
verificar se uma referência é nula antes de usá-la, o que pode levar a falhas
no programa. A exceção `NullPointerException` manda lembranças.

Se por um lado a invenção do zero trouxe vantagens significativas para a
matemática, o conceito de referências nulas em linguagens de programação tem
sido alvo de críticas por seus possíveis efeitos negativos e potenciais erros
causados pela sua utilização inadequada.

#### Na arquitetura de software

Antes de aprofundarmos a discussão do quer seria o zero ou ausência
arquitetural, gostaria que você refletisse sob a seguinte questão: todo
sistema/software possui uma arquitetura associada?! Naturalmente estamos
considerando sistemas com uma quantidade de funcionalidade suficiente para que
decida definir alguma arquitetura. Para responder essa pergunta, primeiro
precisamos definir o que seria a arquitetura de um software.

A análise da arquitetura de um software é por natureza multidimensional e deve
considerar fatores como estrutura, características arquiteturais, princípios de
desenho e decisões arquiteturais[^4]. A dimensão "_estrutura_" refere-se ao
tipo de [estilo
arquitetural](https://notes.clementino.me/blog/estilos-arquiteturais/)
implementado, ou seja, como os módulos (funções, classes, pacotes e etc.) de um
sistema devem estar organizados. Em suma, para fins da discussão proposta nesse
artigo, podemos considerar a _arquitetura de um software como o conjunto de
regras que governa a organização dos seus módulos.

Agora que estamos alinhados com a definição de arquitetura de software, podemos
retornar com a reflexão feita no inicio dessa seção sobre se todo sistema de
uma uma arquitetura, ou refraseando, após definirmos o conceito de arquitetura
de software, se para todo sistema é possível determinar um conjunto finito de
regras logicamente interconectadas que determinam a sua organização?! No limite
a resposta é não! 

Assim como na matemática a ausência do zero na matemática dificultaria a
compreensão e execução de operações, a falta de  uma arquitetura clara e bem
definida em um sistema de software pode levar a diferentes problemas. Tanto que
esse tipo de cenário recebeu um nome "_Big Ball of Mud_".

## O anti-padrão: Big Ball of Mud

O conceito de _"Big Ball of Mud"_ se refere a um estilo arquitetural em que
essas regras e estruturas não estão presentes ou são negligenciadas. Esse termo
foi cunhado por Brian Foote e Joseph Yoder em seu artigo[^3], descrevendo um
sistema em que é difícil identificar qualquer tipo de estilo arquitetural
claro. 

>(...) Big Ball of Mud  é uma selva de código espaguete, estruturada de forma
>aleatória, (...), desleixada, (...). Esses sistemas mostram sinais
>inconfundíveis de crescimento desordenado (...) . As informações são
>compartilhadas de forma promíscua entre elementos (...) do sistema, muitas
>vezes a ponto de quase todas as informações importantes se tornarem globais ou
>duplicadas.

Um sistema com as características de "Big Ball of Mud" geralmente resulta em
código desorganizado, com dependências entrelaçadas, falta de modularidade e
reutilização de código. Isso impacta diretamente na manutenção, escalabilidade
e evolução do sistema. O código torna-se difícil de ler e entender,
dificultando a detecção de problemas, a implementação de novas funcionalidades
e a correção de erros.


## Como evitar o anti-padrão

No artigo que dar origem ao termo "_Big Ball of Mud_", os autores, ao avaliaram
os motivos da ocorrência do anti-padrão, relatam que _"(..) A estrutura geral
do sistema pode nunca ter sido bem definida. Se tiver sido, pode ter se
desgastado de forma irreconhecível"_. A partir do que os autores afirma, o
anti-padrão acontece para os projetos em que arquitetura nunca foi uma
preocupação, ou se foi, as regras não foram respeitadas ocorrendo o fenômeno
conhecido como _erosão arquitetural_.

A fim de mitigar os efeitos da erosão de um arquitetural, o primeiro passo é a
mudança de mentalidade de todos envolvidos no desenvolvimento do software. Essa
mudança de comportamento pode partir da premissa que _"apenas funcionar não
deveria ser o suficiente"_. Na prática, cada alteração no sistema deveria se
realizada de forma estratégica e não de uma maneira tática[^5].

Na abordagem tática, seu foco principal é fazer com que algo funcione, como um
novo recurso ou uma correção de bug. Por outro lado, ao atuar na evolução do
sistema de forma estratégica, você não deve pensar em "código funcional" como
seu objetivo principal, embora, é claro, seu código deva funcionar. O objetivo
deve ser produzir um ótimo design, que também funcione[^5]. Porém, apenas a
mudança de comportamento pode não ser suficiente.

Em alguns cenários talvez seja mais efetivo automatizar a detecção de anomalias
arquiteturais. Para projetos que utilizam Java e outras linguagens
correlacionadas existe a biblioteca chamada
[ArchUnit](https://www.archunit.org/). Ao utilizá-la como um teste no projeto
de software, é possível garantir que a arquitetura definida seja continuamente
seguida, mesmo que as pessoas envolvidas no projeto não façam mais parte dele.
Dessa forma, a biblioteca auxilia na manutenção do estilo arquitetural,
promovendo a consistência e coerência ao longo do tempo. Além disso, a
_ArchUnit_ possibilita a detecção automática de violações arquiteturais,
permitindo uma rápida identificação e correção de problemas antes que eles se
tornem críticos. Isso resulta em um código mais limpo, modular e de fácil
manutenção. A seguir temos o exemplo de um teste que valida que as classes de
serviço só tenham dependência com outras classes de serviço ou aquelas de
camada de acesso à dados.


```java
import static com.tngtech.archunit.lang.syntax.ArchRuleDefinition.classes;

import com.tngtech.archunit.core.domain.JavaClasses;
import com.tngtech.archunit.core.domain.JavaClass;
import com.tngtech.archunit.core.importer.ClassFileImporter;
import com.tngtech.archunit.lang.ArchRule;
import org.junit.Test;

public class ArchUnitTest {

    private final JavaClasses classes = new ClassFileImporter()
            .importPackages("com.example.project");

    @Test
    public void ensureDependencyRules() {
        // Verifica regras de dependências entre classes
        ArchRule rule = classes()
                .should()
                .dependOnClassesThat()
                .resideInAnyPackage("..service..", "..repository..")
                .because("Services devem depender apenas de outras classes de serviço ou repositórios");

        rule.check(classes);
    }

}
```

## Conclusão 

Assim como o número zero se tornou essencial para a matemática, a adoção de uma
arquitetura de software eficiente é fundamental para um sistema robusto e
sustentável. O uso de padrões de projeto, separação de responsabilidades e
outras práticas arquiteturais ajudam a evitar o "_Big Ball of Mud_" e garantem
um código mais organizado, reutilizável e de fácil manutenção.

Um anti-padrão como o "_Big Ball of Mud_" existe justamente para nos mostrar a
importância de estabelecer estruturas e regras para tornar sistemas complexos
mais compreensíveis e manejáveis. Enquanto o zero facilita operações
matemáticas, a adoção de uma arquitetura clara facilita a desenvolvimento de
software de qualidade. Ter uma abordagem estratégica durante a evolução do
projeto e automatizar a identificação de anomalias podem evitar a erosão da
arquitetura do seu projeto.

[^1]:
    O Homem que Calculava.
    https://pt.wikipedia.org/wiki/O_Homem_que_Calculava

[^2]:
    Null References: The Billion Dollar Mistake.
    https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/

[^3]:
    Big Ball of Mud.
    https://wiki.c2.com/?BigBallOfMud

[^4]:
    Richards, Mark, and Neal Ford. Fundamentals of Software Architecture: An
    Engineering Approach. O'Reilly Media, 2020.

[^5]:
    Ousterhout, J. K. (n.d.). A Philosophy of Software Design. United
    States: Yaknyam Press.

